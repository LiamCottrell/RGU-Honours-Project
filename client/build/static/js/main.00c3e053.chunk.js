(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(51)},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),i=a(22),l=a(10),s=a(2),u=a(3),m=a(5),d=a(4),b=a(6),p=a(21),h=a.n(p),f=a(17),v=a(41),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).getDataMMSI=function(e){fetch("/api/getData").then(function(e){return e.json()}).then(function(t){return f.where(t,{MMSI:parseInt(e,10)})}).then(function(t){return a.setState({id:e,data:t})})},a.state={id:null,data:{}},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=h.a.parse(this.props.location.search);e.MMSI&&this.getDataMMSI(e.MMSI)}},{key:"render",value:function(){var e=this.state.data;return console.log(e),r.a.createElement("a-scene",{ar:!0,stats:!0},e?r.a.createElement(E,{data:e}):r.a.createElement(E,null),r.a.createElement(w,null),r.a.createElement(k,null))}}]),t}(r.a.Component),O=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=null,t=null;e=this.props.Lat?this.props.Lat:60.27432,t=this.props.Lon?this.props.Lon:-1.08595;var a=this.props.boat;return r.a.createElement("a-entity",{"a-location":"lat:"+e+";lon:"+t+";radius:0.15;mode:relative;elevation:0"},a?r.a.createElement(y,{data:this.props.data}):r.a.createElement(g,{traceColour:this.props.traceColour}))}}]),t}(r.a.Component),E=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data,t=v();return r.a.createElement("a-entity",{id:"world",position:"0 0 -0.4",visible:"true","a-terrain":" observer:camera; radius:0.15; observer:camera; "},this.props.data?Object.keys(e).map(function(a,n){return n!==Object.values(e).length-1?r.a.createElement(O,{key:a,boat:!1,traceColour:t,Lat:Object.values(e)[n].Latitude,Lon:Object.values(e)[n].Longitude}):r.a.createElement(O,{key:a,boat:!0,data:Object.values(e)[n],Lat:Object.values(e)[n].Latitude,Lon:Object.values(e)[n].Longitude})}):null)}}]),t}(r.a.Component),y=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return console.log("this is the dom data"),console.log(this.props.data),r.a.createElement("a-entity",{rotation:"-90 0 0"},r.a.createElement("a-gltf-model",{mmsi:this.props.data.MMSI,"data-ship":this.props.data,"ship-events":!0,scale:"0.00002 0.00002 0.00002",src:"boat.glb"}))}}]),t}(r.a.Component),g=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.traceColour;return r.a.createElement("a-box",{scale:"0.0006 0.0006 0.0006",color:e})}}]),t}(r.a.Component),w=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"modal fade",id:"shipPopup",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Modal title"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{id:"shipContent",className:"modal-body"},"testicle"),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{id:"closePopup",type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")))))}}]),t}(r.a.Component),k=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("a-entity",{id:"cameraRig"},r.a.createElement("a-entity",{id:"camera",camera:"fov: 45; near:5; far:10",position:"0 0 0","orbit-controls":" target: #world; minDistance:1000; maxDistance:5000; minPolarAngle:0.1; maxPolarAngle:3.04159265359; enableProportionalVelocity:true; "},r.a.createElement("a-entity",{position:"0 0 -0.05",geometry:"primitive: ring; radiusInner: 0.0005; radiusOuter: 0.001;",material:"color: cyan; shader: flat",cursor:"maxDistance: 30; fuse: true"},r.a.createElement("a-animation",{begin:"click",easing:"ease-in",attribute:"scale",fill:"forwards",from:"0.2 0.2 0.2",to:"1 1 1",dur:"150"}),r.a.createElement("a-animation",{begin:"fusing",easing:"ease-in",attribute:"scale",fill:"backwards",from:"1 1 1",to:"0.2 0.2 0.2",dur:"1500"}))))}}]),t}(r.a.Component),M=j,N=a(17),C=a(42),L=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"cover-container d-flex w-100 h-100 p-3 mx-auto flex-column"},r.a.createElement("header",{className:"masthead mb-auto"},r.a.createElement("div",{className:"inner"},r.a.createElement("h3",{className:"masthead-brand"},"Ship Honours Project"),r.a.createElement("nav",{className:"nav nav-masthead justify-content-center"},r.a.createElement("a",{className:"nav-link active",href:"/"},"Home"),r.a.createElement("a",{className:"nav-link",href:"/world"},"World"),r.a.createElement("a",{className:"nav-link",href:"/contact"},"Contact")))),r.a.createElement("main",{role:"main",className:"inner cover"},r.a.createElement("h1",{className:"cover-heading"},"Search for Boats."),r.a.createElement("form",{action:"world",method:"get"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleFormControlSelect1"},"Filter Boat by MMSI"),r.a.createElement("select",{className:"form-control",id:"boatmmsi",name:"MMSI"},r.a.createElement("option",{value:""},"All"),r.a.createElement(I,null))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Show Map"))),r.a.createElement(S,null))}}]),t}(r.a.Component),S=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"mastfoot mt-auto"},r.a.createElement("div",{className:"inner"},r.a.createElement("p",null,"Cover template for ",r.a.createElement("a",{href:"https://getbootstrap.com/"},"Bootstrap"),", by ",r.a.createElement("a",{href:"https://twitter.com/mdo"},"@mdo"),", used by Liam Cottrell.")))}}]),t}(r.a.Component),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).getData=function(){fetch("/api/getData").then(function(e){return e.json()}).then(function(e){return a.setState({data:e})})},a.state={data:{}},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.data,t=N.countBy(e,function(e){return e.MMSI}),a=Object.keys(t).map(function(t,a){var n=N.where(e,{MMSI:parseInt(t,10)}),r=Object.keys(n).length,o={lat:Object.values(n)[0].Latitude,lon:Object.values(n)[0].Longitude},c={lat:Object.values(n)[r-1].Latitude,lon:Object.values(n)[r-1].Longitude};return C(o,c,{format:!0,unit:"miles"})});return Object.keys(t).map(function(e,n){return r.a.createElement("option",{key:e,value:Object.keys(t)[n]},"`",Object.keys(t)[n],"` locations(",Object.values(t)[n],"), ",Object.values(a)[n])})}}]),t}(r.a.Component),x=L,D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var P=r.a.createElement(i.a,null,r.a.createElement(l.a,{path:"/",component:x,exact:!0}),r.a.createElement(l.a,{path:"/world",component:M}));c.a.render(P,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");D?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):A(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):A(t,e)})}}()}},[[25,1,2]]]);
//# sourceMappingURL=main.00c3e053.chunk.js.map